# YFYæ¨¡å—æµ‹è¯•å¥—ä»¶

æœ¬ç›®å½•åŒ…å«YFYæ¨¡å—çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œæä¾›ç®€æ´ä½†å…¨é¢çš„å•å…ƒæµ‹è¯•è¦†ç›–ã€‚

## æµ‹è¯•æ–‡ä»¶è¯´æ˜

### 1. `run_tests.c` - ä¸»è¦æµ‹è¯•å¥—ä»¶ â­
**æ¨èä½¿ç”¨**ï¼šç®€æ´é«˜æ•ˆçš„æµ‹è¯•å¥—ä»¶ï¼Œé€‚åˆæ—¥å¸¸å¼€å‘ä½¿ç”¨ã€‚

```bash
# ç¼–è¯‘
gcc -I../../../utilities -I.. ../yfy_data.c ../yfy_interface.c run_tests.c -o run_tests.exe

# è¿è¡Œå®Œæ•´æµ‹è¯•
./run_tests.exe

# è¿è¡Œå¿«é€Ÿå†’çƒŸæµ‹è¯•
./run_tests.exe quick
```

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… åŸºæœ¬åŠŸèƒ½æµ‹è¯•ï¼ˆç”µå‹ã€ç”µæµã€ç»„å·ã€æ¸©åº¦ï¼‰
- âœ… çŠ¶æ€ä½è¯»å–æµ‹è¯•ï¼ˆæ‰€æœ‰çŠ¶æ€è¡¨ï¼‰
- âœ… ç”µå‹ç”µæµæµ‹è¯•ï¼ˆäº¤æµè¾“å…¥ã€æœ€å¤§æœ€å°å€¼ï¼‰
- âœ… ç»„æ•°æ®æµ‹è¯•ï¼ˆç»„ç”µå‹ã€ç”µæµã€æ¨¡å—æ•°ï¼‰
- âœ… ç³»ç»Ÿæ•°æ®æµ‹è¯•ï¼ˆç³»ç»Ÿçº§å‚æ•°ï¼‰
- âœ… 32ä½å®æµ‹è¯•ï¼ˆæ•°æ®ç»„è£…å’Œæå–ï¼‰
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆåœ°å€è¶Šç•Œã€ç©ºæŒ‡é’ˆï¼‰
- âœ… æ•°æ®ç±»å‹æµ‹è¯•ï¼ˆfloatã€uint8_tã€uint16_tã€int8_tï¼‰

### 2. `unit_test.c` - è¯¦ç»†å•å…ƒæµ‹è¯•
æä¾›è¯¦ç»†çš„æµ‹è¯•è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯ï¼Œé€‚åˆè°ƒè¯•ä½¿ç”¨ã€‚

```bash
# ç¼–è¯‘è¿è¡Œ
gcc -I../../../utilities -I.. ../yfy_data.c ../yfy_interface.c unit_test.c -o unit_test.exe && ./unit_test.exe
```

### 3. `comprehensive_test.c` - ç»¼åˆæ€§èƒ½æµ‹è¯•
åŒ…å«å‹åŠ›æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’Œéšæœºæ•°æ®æµ‹è¯•ã€‚

```bash
# ç¼–è¯‘è¿è¡Œ
gcc -I../../../utilities -I.. ../yfy_data.c ../yfy_interface.c comprehensive_test.c -o comprehensive_test.exe && ./comprehensive_test.exe
```

**ç‰¹è‰²åŠŸèƒ½**ï¼š
- ğŸš€ å‹åŠ›æµ‹è¯•ï¼ˆ10ä¸‡æ¬¡è¯»å–æ“ä½œï¼‰
- â±ï¸ æ€§èƒ½æµ‹è¯•ï¼ˆè®¡æ—¶ç»Ÿè®¡ï¼‰
- ğŸ² éšæœºæ•°æ®æµ‹è¯•
- ğŸ“Š è¯¦ç»†æ€§èƒ½æŠ¥å‘Š

### 4. `justfile` - æ„å»ºè‡ªåŠ¨åŒ– â­
**ç°ä»£åŒ–æ„å»ºå·¥å…·**ï¼šä½¿ç”¨Justå‘½ä»¤è¿è¡Œå™¨è‡ªåŠ¨åŒ–æ‰€æœ‰æ„å»ºå’Œæµ‹è¯•ä»»åŠ¡ã€‚

```bash
# å®‰è£…Just (å¦‚æœæœªå®‰è£…)
# Windows: scoop install just
# macOS: brew install just
# Linux: cargo install just

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
just

# å¸¸ç”¨å‘½ä»¤
just test           # ä¸»è¦æµ‹è¯•å¥—ä»¶
just test-quick     # å¿«é€Ÿå†’çƒŸæµ‹è¯•
just test-all       # æ‰€æœ‰æµ‹è¯•
just build          # ç¼–è¯‘æ‰€æœ‰ç¨‹åº
just clean          # æ¸…ç†æ„å»ºæ–‡ä»¶
just info           # æ˜¾ç¤ºæ„å»ºä¿¡æ¯
```

**Justå‘½ä»¤å®Œæ•´åˆ—è¡¨**ï¼š
- `just build` - ç¼–è¯‘æ‰€æœ‰æµ‹è¯•ç¨‹åº
- `just test` - è¿è¡Œä¸»è¦æµ‹è¯•å¥—ä»¶
- `just test-quick` - å¿«é€Ÿå†’çƒŸæµ‹è¯•
- `just test-full` - è¯¦ç»†å•å…ƒæµ‹è¯•
- `just test-perf` - æ€§èƒ½æµ‹è¯•
- `just test-macro` - 32ä½å®æµ‹è¯•
- `just test-all` - è¿è¡Œæ‰€æœ‰æµ‹è¯•
- `just demo-macro` - å®ä½¿ç”¨ç¤ºä¾‹
- `just clean` - æ¸…ç†æ„å»ºæ–‡ä»¶
- `just rebuild` - é‡æ–°æ„å»º
- `just ci` - æŒç»­é›†æˆæµ‹è¯•
- `just dev` - å¼€å‘è€…å¿«é€ŸéªŒè¯
- `just info` - æ˜¾ç¤ºæ„å»ºä¿¡æ¯

### 5. å…¶ä»–æµ‹è¯•æ–‡ä»¶
- `test_macro_only.c` - ä¸“é—¨æµ‹è¯•32ä½å®
- `macro_usage_example.c` - å®ä½¿ç”¨ç¤ºä¾‹
- `test_header_completeness.c` - å¤´æ–‡ä»¶å®Œæ•´æ€§æµ‹è¯•

## æµ‹è¯•ç»“æœç¤ºä¾‹

### å®Œæ•´æµ‹è¯•è¾“å‡º
```
=== YFYæ¨¡å—æµ‹è¯•å¥—ä»¶ ===
è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶...
è¿è¡Œ test_basic_functions... âœ“ é€šè¿‡
è¿è¡Œ test_status_functions... âœ“ é€šè¿‡
è¿è¡Œ test_voltage_current... âœ“ é€šè¿‡
è¿è¡Œ test_group_functions... âœ“ é€šè¿‡
è¿è¡Œ test_system_functions... âœ“ é€šè¿‡
è¿è¡Œ test_32bit_macros... âœ“ é€šè¿‡
è¿è¡Œ test_boundary_conditions... âœ“ é€šè¿‡
è¿è¡Œ test_data_types... âœ“ é€šè¿‡

=== æµ‹è¯•ç»“æœ ===
æ€»è®¡: 8, é€šè¿‡: 8, å¤±è´¥: 0
æˆåŠŸç‡: 100.0%
ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

### æ€§èƒ½æµ‹è¯•è¾“å‡º
```
=== å‹åŠ›æµ‹è¯•ï¼šè¯»å–æ“ä½œ ===
å®Œæˆ 90000 æ¬¡è¯»å–æ“ä½œï¼Œè€—æ—¶: 16.00 ms
å¹³å‡æ¯æ¬¡è¯»å–: 0.0002 ms

=== 32ä½å®æ€§èƒ½æµ‹è¯• ===
å®Œæˆ 600000 æ¬¡å®æ“ä½œï¼Œè€—æ—¶: 16.00 ms
å¹³å‡æ¯æ¬¡å®æ“ä½œ: 0.000027 ms
```

## æµ‹è¯•è¦†ç›–ç»Ÿè®¡

### å‡½æ•°è¦†ç›–ç‡ï¼š100%
- **ç¬¬ä¸€ç±»å‡½æ•°**ï¼š47ä¸ªï¼ˆå•ä¸ªæ¨¡å—æ•°æ®è¯»å–ï¼‰
- **ç¬¬äºŒç±»å‡½æ•°**ï¼š3ä¸ªï¼ˆç»„æ•°æ®è¯»å–ï¼‰
- **ç¬¬ä¸‰ç±»å‡½æ•°**ï¼š3ä¸ªï¼ˆç³»ç»Ÿæ•°æ®è¯»å–ï¼‰
- **32ä½å®**ï¼š6ä¸ªï¼ˆæ•°æ®ç»„è£…å’Œæå–ï¼‰

### æµ‹è¯•ç±»å‹è¦†ç›–
- âœ… **åŠŸèƒ½æµ‹è¯•**ï¼šæ‰€æœ‰APIå‡½æ•°
- âœ… **è¾¹ç•Œæµ‹è¯•**ï¼šåœ°å€è¶Šç•Œã€ç»„å·è¶Šç•Œ
- âœ… **é”™è¯¯å¤„ç†**ï¼šç©ºæŒ‡é’ˆã€æ— æ•ˆå‚æ•°
- âœ… **æ•°æ®ç±»å‹**ï¼šfloatã€uint8_tã€uint16_tã€int8_t
- âœ… **æ€§èƒ½æµ‹è¯•**ï¼šå¤§é‡æ“ä½œå‹åŠ›æµ‹è¯•
- âœ… **ä¸€è‡´æ€§æµ‹è¯•**ï¼šå¤šæ¬¡è¯»å–æ•°æ®ä¸€è‡´æ€§

## ä½¿ç”¨å»ºè®®

### ä½¿ç”¨Justæ„å»ºå·¥å…· â­ (æ¨è)
```bash
# æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤
just

# å¿«é€ŸéªŒè¯åŠŸèƒ½
just test-quick

# å®Œæ•´åŠŸèƒ½æµ‹è¯•
just test

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
just test-all

# æ€§èƒ½æµ‹è¯•
just test-perf

# æ¸…ç†æ„å»ºæ–‡ä»¶
just clean
```

### ä¼ ç»Ÿç¼–è¯‘æ–¹å¼
```bash
# å¿«é€ŸéªŒè¯åŠŸèƒ½
./run_tests.exe quick

# å®Œæ•´åŠŸèƒ½æµ‹è¯•
./run_tests.exe
```

### æ€§èƒ½è°ƒä¼˜
```bash
# ä½¿ç”¨Just
just test-perf

# ä¼ ç»Ÿæ–¹å¼
./comprehensive_test.exe
```

### è°ƒè¯•é—®é¢˜
```bash
# ä½¿ç”¨Just
just test-full

# ä¼ ç»Ÿæ–¹å¼
./unit_test.exe
```

## æµ‹è¯•æ•°æ®è¯´æ˜

æµ‹è¯•ä½¿ç”¨æ ‡å‡†åŒ–çš„æµ‹è¯•æ•°æ®ï¼š
- **æ¨¡å—0**ï¼šç”µå‹48.0Vï¼Œç”µæµ10.0Aï¼Œç»„å·1ï¼Œæ¸©åº¦25Â°C
- **ç»„1**ï¼šç”µå‹48.0Vï¼Œç”µæµ100.0Aï¼Œæ¨¡å—æ•°4
- **ç³»ç»Ÿ**ï¼šç”µå‹480.0Vï¼Œç”µæµ1000.0Aï¼Œæ¨¡å—æ•°12

## ç¼–è¯‘è¦æ±‚

- GCCç¼–è¯‘å™¨
- åŒ…å«è·¯å¾„ï¼š`-I../../../utilities -I..`
- é“¾æ¥æ–‡ä»¶ï¼š`../yfy_data.c ../yfy_interface.c`

## è¿”å›å€¼è¯´æ˜

- **0**ï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡
- **1**ï¼šæœ‰æµ‹è¯•å¤±è´¥

## æ³¨æ„äº‹é¡¹

1. æµ‹è¯•å‰ä¼šè‡ªåŠ¨åˆå§‹åŒ–æµ‹è¯•æ•°æ®
2. æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯éç ´åæ€§çš„
3. æµ‹è¯•è¦†ç›–äº†æ‰€æœ‰å…¬å¼€API
4. æ”¯æŒå¿«é€Ÿæµ‹è¯•å’Œå®Œæ•´æµ‹è¯•ä¸¤ç§æ¨¡å¼
